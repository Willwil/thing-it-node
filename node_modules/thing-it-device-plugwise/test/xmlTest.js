var xml2js = require("xml2js");

var xml = '<appliances>' +
    '<appliance>' +
    '<name>Lampfront</name>' +
    '<type>lamp</type>' +
    '<created_date>2012-09-01T18:08:44+02:00</created_date>' +
    '<last_seen_date>2012-09-01T18:10:08+02:00</last_seen_date>' +
    '<power_state>off</power_state>' +
    '<current_power_usage>0</current_power_usage>' +
    '<do_not_switch_off>false</do_not_switch_off>' +
    '<last_known_measurement_date></last_known_measurement_date>' +
    '</appliance>' +
    '<appliance>' +
    '<name>Lampfront</name>' +
    '<type>lamp</type>' +
    '<created_date>2012-09-01T18:08:44+02:00</created_date>' +
    '<last_seen_date>2012-09-01T18:10:08+02:00</last_seen_date>' +
    '<power_state>off</power_state>' +
    '<current_power_usage>0</current_power_usage>' +
    '<do_not_switch_off>false</do_not_switch_off>' +
    '<last_known_measurement_date></last_known_measurement_date>' +
    '</appliance>' +
    '</appliances>';

xml2js.parseString(xml, function (err, result) {
    console.error(err);
    console.log(result);
});

for (var n = 0; n < 10; ++n) {
    f1(function () {
        console.log("n = " + n);
    }.bind({n: n}))
}

function f1(inner)
{
    inner();
}

